NAME = philo

RM_DIR = rm -rf

CC = clang

CFLAGS = -Wall -Wextra -Werror -g -pthread

HEADER_1 = headers/philo.h

SRCS_DIR = srcs/

OBJ_DIR = obj/

SRCS_FILES = main.c error_handling.c init.c utils.c philo.c

SRCS = $(addprefix $(SRCS_DIR), $(SRCS_FILES))

O_SRCS = $(addprefix $(OBJ_DIR), $(SRCS_FILES:.c=.o))

$(OBJ_DIR)%.o : $(SRCS_DIR)%.c $(HEADER_1)
	mkdir -p $(OBJ_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

BARS := "â•â•â•â•â•â•â•â•â•â• 0%" "â–°â•â•â•â•â•â•â•â•â• 1%" "â–°â•â•â•â•â•â•â•â•â• 2%" "â–°â•â•â•â•â•â•â•â•â• 3%" "â–°â•â•â•â•â•â•â•â•â• 4%" \
	"â–°â•â•â•â•â•â•â•â•â• 5%" "â–°â•â•â•â•â•â•â•â•â• 6%" "â–°â•â•â•â•â•â•â•â•â• 7%" "â–°â•â•â•â•â•â•â•â•â• 8%" "â–°â•â•â•â•â•â•â•â•â• 9%" \
	"â–°â•â•â•â•â•â•â•â•â• 10%" "â–°â–°â•â•â•â•â•â•â•â• 11%" "â–°â–°â•â•â•â•â•â•â•â• 12%" "â–°â–°â•â•â•â•â•â•â•â• 13%" "â–°â–°â•â•â•â•â•â•â•â• 14%" \
	"â–°â–°â•â•â•â•â•â•â•â• 15%" "â–°â–°â•â•â•â•â•â•â•â• 16%" "â–°â–°â•â•â•â•â•â•â•â• 17%" "â–°â–°â•â•â•â•â•â•â•â• 18%" "â–°â–°â•â•â•â•â•â•â•â• 19%" \
	"â–°â–°â•â•â•â•â•â•â•â• 20%" "â–°â–°â–°â•â•â•â•â•â•â• 21%" "â–°â–°â–°â•â•â•â•â•â•â• 22%" "â–°â–°â–°â•â•â•â•â•â•â• 23%" "â–°â–°â–°â•â•â•â•â•â•â• 24%" \
	"â–°â–°â–°â•â•â•â•â•â•â• 25%" "â–°â–°â–°â•â•â•â•â•â•â• 26%" "â–°â–°â–°â•â•â•â•â•â•â• 27%" "â–°â–°â–°â•â•â•â•â•â•â• 28%" "â–°â–°â–°â•â•â•â•â•â•â• 29%" \
	"â–°â–°â–°â•â•â•â•â•â•â• 30%" "â–°â–°â–°â–°â•â•â•â•â•â• 31%" "â–°â–°â–°â–°â•â•â•â•â•â• 32%" "â–°â–°â–°â–°â•â•â•â•â•â• 33%" "â–°â–°â–°â–°â•â•â•â•â•â• 34%" \
	"â–°â–°â–°â–°â•â•â•â•â•â• 35%" "â–°â–°â–°â–°â•â•â•â•â•â• 36%" "â–°â–°â–°â–°â•â•â•â•â•â• 37%" "â–°â–°â–°â–°â•â•â•â•â•â• 38%" "â–°â–°â–°â–°â•â•â•â•â•â• 39%" \
	"â–°â–°â–°â–°â•â•â•â•â•â• 40%" "â–°â–°â–°â–°â–°â•â•â•â•â• 41%" "â–°â–°â–°â–°â–°â•â•â•â•â• 42%" "â–°â–°â–°â–°â–°â•â•â•â•â• 43%" "â–°â–°â–°â–°â–°â•â•â•â•â• 44%" \
	"â–°â–°â–°â–°â–°â•â•â•â•â• 45%" "â–°â–°â–°â–°â–°â•â•â•â•â• 46%" "â–°â–°â–°â–°â–°â•â•â•â•â• 47%" "â–°â–°â–°â–°â–°â•â•â•â•â• 48%" "â–°â–°â–°â–°â–°â•â•â•â•â• 49%" \
	"â–°â–°â–°â–°â–°â•â•â•â•â• 50%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 51%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 52%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 53%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 54%" \
	"â–°â–°â–°â–°â–°â–°â•â•â•â• 55%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 56%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 57%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 58%" "â–°â–°â–°â–°â–°â–°â•â•â•â• 59%" \
	"â–°â–°â–°â–°â–°â–°â•â•â•â• 60%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 61%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 62%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 63%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 64%" \
	"â–°â–°â–°â–°â–°â–°â–°â•â•â• 65%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 66%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 67%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 68%" "â–°â–°â–°â–°â–°â–°â–°â•â•â• 69%" \
	"â–°â–°â–°â–°â–°â–°â–°â•â•â• 70%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 71%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 72%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 73%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 74%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â•â• 75%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 76%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 77%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 78%" "â–°â–°â–°â–°â–°â–°â–°â–°â•â• 79%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â•â• 80%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 81%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 82%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 83%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 84%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 85%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 86%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 87%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 88%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 89%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â–°â• 90%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 91%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 92%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 93%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 94%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 95%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 96%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 97%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 98%" "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 99%" \
	"â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 100%"

all: $(NAME)
	clear
	@for bar in $(BARS); do \
		echo "\033[1m\033[3m\033[5m\033[37mâ‹˜  ð‘ƒð‘™ð‘’ð‘Žð‘ ð‘’ ð‘¤ð‘Žð‘–ð‘¡... â‹™\033[0m"; \
		echo "\033[3m$$bar\033[0m"; \
		if [ "$$bar" = "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° 100%" ]; then \
			sleep 0.5; \
		else \
			sleep 0.012; \
		fi; \
		clear; \
	done
	clear;

$(NAME): $(SRCS) $(O_SRCS)
	clear
	$(CC) $(CFLAGS) $(O_SRCS) -o $(NAME)
	clear

clean:
	$(RM_DIR) $(OBJ_DIR)
	$(RM) $(O_SRCS)
	clear

fclean: clean 
	$(RM) $(NAME)
	clear

re: fclean all
	clear

norm:
	norminette *

.PHONY: all clean fclean re push norm
